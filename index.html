<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>🛒متجر أفخم الملابس للأطفال  BENAKRAB-shoop</title>

  <style>
    body {
      font-family: "Cairo", sans-serif;
      direction: rtl;
      margin:0;
      padding:0;
      background: linear-gradient(135deg,#eef2f7,#dbeafe);
      color: #2c3e50;
    }

    header {
      background: linear-gradient(135deg,#2563eb,#1e40af);
      color:white;
      text-align:center;
      padding:20px 10px;
      box-shadow:0 4px 10px rgba(0,0,0,0.2);
    }
    header .logo {
      font-size:23px;
      font-weight:bold;
      letter-spacing:1px;
    }
    header .tagline {
      font-size:18px;
      margin-top:4px;
      opacity:0.9;
    }

    /* السلايدر */
    .slideshow {
      width: 98%;
      max-width:700px;
      margin: 24px auto 6px;
      position:relative;
      overflow:hidden;
      border-radius:14px;
      box-shadow:0 6px 18px rgba(0,0,0,0.18);
      background:#fff;
    }
    .slideshow .slide {
      width:98%;
      display:none;
      border-radius:14px;
    }
    .slideshow .slide.active { display:block; animation: fade 0.9s ease-in-out; }
    @keyframes fade {
      from {opacity:0.4; transform: scale(1.01);}
      to {opacity:1; transform: scale(1);}
    }

    /* الفورم */
    form {
      max-width:700px;
      margin:18px auto 40px;
      padding:22px;
      background:#fff;
      border-radius:14px;
      box-shadow:0 6px 20px rgba(0,0,0,0.12);
    }
    h2 {
      text-align:center;
      color:#2563eb;
      margin-top:6px;
      margin-bottom:10px;
    }
    label { display:block; margin-top:12px; font-weight:bold; color:#344; }
    input, select {
      width:98%;
      padding:10px;
      margin-top:6px;
      font-size:18px;
      border-radius:10px;
      border:1px solid #ccc;
      transition:0.2s;
      box-sizing:border-box;
    }
    input:focus, select:focus {
      border-color:#2563eb;
      box-shadow:0 0 6px rgba(37,99,235,0.18);
      outline:none;
    }
    button {
      margin-top:18px;
      width:98%;
      padding:8px;
      background:#2563eb;
      color:#fff;
      border:none;
      border-radius:12px;
      font-size:18px;
      cursor:pointer;
    }
    button:hover { background:#1e40af; }

    .piece {
      border:2px dashed #2563eb;
      padding:12px;
      border-radius:10px;
      margin-bottom:12px;
      background:#f0f9ff;
    }
    .piece img {
      max-width:240px;
      display:block;
      margin:8px auto;
      border-radius:10px;
      box-shadow:0 4px 10px rgba(0,0,0,0.2);
    }

    #priceDetails {
  margin-top: 14px;
  font-weight: bold;
  color: #118a3b; /* أخضر واضح */
}

    #successModal {
      display:none;
      position: fixed;
      top:0; left:0; right:0; bottom:0;
      background: rgba(0,0,0,0.56);
      z-index: 9999;
      align-items:center;
      justify-content:center;
    }
    #successModal .modal-content {
      background:#fff;
      padding:18px;
      border-radius:12px;
      width:min(420px,92%);
      margin:0 auto;
      text-align:center;
      box-shadow:0 8px 28px rgba(0,0,0,0.25);
    }
    #successModal h3 { color:#118a3b; margin:6px 0 8px;}
    #successModal p { margin:8px 0;}
    #successModal button { margin-top:10px; padding:10px 20px; border-radius:8px; background:#2563eb; color:white; border:none; cursor:pointer; }

    #loading { display:none; text-align:center; margin-top:12px;}
    #loading img { vertical-align:middle;}

    @media(max-width:520px){
      .slideshow { max-width:94%; }
      form { padding:16px; margin:12px auto 28px;}
    }
  </style>
</head>
<body>

<header>
  <div class="logo">🛍️ BENAKRAB-Shoop</div>
  <div class="tagline">أزياء أطفال بأحدث الموديلات</div>
</header>

<div class="slideshow" aria-hidden="false">
  <div class="slide active">
    <img src="images/modal1.jpg" alt="مودال 1">
    <div class="modal-price">💰 السعر: 3000 دج</div>
  </div>
  <div class="slide">
    <img src="images/modal2.jpg" alt="مودال 2">
    <div class="modal-price">💰 السعر: 3000 دج</div>
  </div>
  <div class="slide">
    <img src="images/modal3.jpg" alt="مودال 3">
    <div class="modal-price">💰 السعر:3000 دج</div>
  </div>
  <div class="slide">
    <img src="images/modal4.jpg" alt="مودال 4">
    <div class="modal-price">💰 السعر: 3000 دج</div>
  </div>
  <div class="slide">
    <img src="images/modal5.jpg" alt="مودال 5">
    <div class="modal-price">💰 السعر: 3000 دج</div>
  </div>
</div>

<style>
.slideshow .slide {
  display:none;
  text-align:center;
  border-radius:14px;
  background:#fff;
  padding:10px;
}
.slideshow .slide.active { display:block; animation: fade 0.9s ease-in-out; }

.slideshow .slide img {
  max-width: 90%;   /* الحد الأقصى للعرض */
  max-height: 350px; /* الحد الأقصى للارتفاع */
  width: auto;
  height: auto;
  border-radius: 12px;
  object-fit: cover; /* يحافظ على نسبة الصورة */
}

.modal-price {
  margin-top:8px;
  font-weight:bold;
  color:#118a3b;
  font-size:18px;
}
</style>
</style>

<h2>🛒  إملأ الاستمارة واطلب احسن الموديلات</h2>

<form id="orderForm">
  <label>👤 الاسم الكامل:</label>
  <input type="text" name="name" required>

 <label for="phone">📞 رقم الهاتف:</label>
    <input type="tel" id="phone" name="phone" 
       dir="rtl"
       placeholder="أدخل رقم الهاتف"
       pattern="^[0-9]{10}$"
       maxlength="10"
       required
       oninvalid="this.setCustomValidity('الرجاء إدخال رقم هاتف صحيح مكون من 10 أرقام')"
       oninput="this.setCustomValidity('')">

  <label>📍 الولاية:</label>
  <select id="wilaya" name="wilaya" required></select>

  <label>📍 الدائرة:</label>
  <input type="text" name="daire" required>

  <label>🏠 العنوان الكامل:</label>
  <input type="text" name="address" required>

  <div id="piecesContainer"></div>
  <button type="button" onclick="addPiece()">➕ أضف إلى السلة 🛒 </button>

  <label>🚚 نوع التوصيل:</label>
  <select id="deliveryType" name="deliveryType">
    <option value="home">إلى المنزل</option>
    <option value="desk">إلى المكتب</option>
  </select>

  <div id="priceDetails">
    💰 السعر: 0 دج<br>💸 السعر الكلي: 0 دج
  </div>

  <button type="submit">✅ إرسال الطلب</button>

  <div id="loading">
    <img src="https://i.gifer.com/ZZ5H.gif" alt="جاري الإرسال..." width="56">
    <p>⏳ جاري معالجة طلبك...</p>
  </div>
</form>

<div id="successModal" role="dialog" aria-modal="true">
  <div class="modal-content">
    <h3>✅ تم استقبال طلبك بنجاح!</h3>
    <p>شكرًا لك على طلبك في BENAKRAB-Shoop.</p>
    <p>لقد تم توجيه جميع بيانات طلبك مباشرة إلى قسم المبيعات للمعالجة.</p>
    <p>📞 سيتواصل معك فريق المبيعات قريبا لتأكيد الطلب وتفاصيل التوصيل.</p>
    <p id="totalPrice"></p>
    <button onclick="closeModal()">إغلاق</button>
  </div>
</div>

<script>
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxTbY9iQeu8_jnba4_mgYyfq4ey6b7NsZeeTH2WClgvsH1VGCHqZbr2jsqCuui88EVW/exec"; // عدّل

// سلايدر الصور
(function initSlider(){
  const slides = document.querySelectorAll(".slideshow .slide");
  let idx = 0;
  if(!slides || slides.length===0) return;
  function show(i){ slides.forEach((s,j)=>s.classList.toggle("active", j===i)); }
  function next(){ idx=(idx+1)%slides.length; show(idx); }
  setInterval(next,3000);
})();

// الولايات وأسعار التوصيل
const deliveryPrices = {
  "أدرار": { "home": 1100, "desk": 600 },
  "الشلف": { "home": 700, "desk": 400 },
  "الأغواط": { "home": 900, "desk": 500 },
  "أم البواقي": { "home": 650, "desk": 400 },
  "باتنة": { "home": 700, "desk": 400 },
  "بجاية": { "home": 700, "desk": 400 },
  "بسكرة": { "home": 900, "desk": 500 },
  "بشار": { "home": 1100, "desk": 600 },
  "البليدة": { "home": 500, "desk": 250 },
  "البويرة": { "home": 700, "desk": 400 },
  "تمنراست": { "home": 1300, "desk": 800 },
  "تبسة": { "home": 700, "desk": 400 },
  "تلمسان": { "home": 800, "desk": 400 },
  "تيارت": { "home": 800, "desk": 400 },
  "تيزي وزو": { "home": 700, "desk": 400 },
  "الجزائر": { "home": 500, "desk": 250 },
  "الجلفة": { "home": 900, "desk": 500 },
  "جيجل": { "home": 700, "desk": 400 },
  "سطيف": { "home": 700, "desk": 400 },
  "سعيدة": { "home": 800, "desk": 400 },
  "سكيكدة": { "home": 600, "desk": 400 },
  "سيدي بلعباس": { "home": 700, "desk": 400 },
  "عنابة": { "home": 700, "desk": 400 },
  "قالمة": { "home": 600, "desk": 400 },
  "قسنطينة": { "home": 600, "desk": 400 },
  "المدية": { "home": 700, "desk": 400 },
  "مستغانم": { "home": 700, "desk": 400 },
  "المسيلة": { "home": 800, "desk": 400 },
  "معسكر": { "home": 700, "desk": 400 },
  "ورقلة": { "home": 900, "desk": 500 },
  "وهران": { "home": 800, "desk": 400 },
  "البيض": { "home": 800, "desk": 500 },
  "إليزي": { "home": 1300, "desk": 600 },
  "برج بوعريريج": { "home": 700, "desk": 400 },
  "بومرداس": { "home": 700, "desk": 400 },
  "الطارف": { "home": 700, "desk": 400 },
  "تندوف": { "home": 1300, "desk": 600 },
  "تيسمسيلت": { "home": 800, "desk": 400 },
  "الوادي": { "home": 900, "desk": 500 },
  "خنشلة": { "home": 700, "desk": 500 },
  "سوق أهراس": { "home": 700, "desk": 400 },
  "تيبازة": { "home": 700, "desk": 400 },
  "ميلة": { "home": 500, "desk": 350 },
  "عين الدفلى": { "home": 700, "desk": 400 },
  "النعامة": { "home": 800, "desk": 500 },
  "عين تموشنت": { "home": 800, "desk": 400 },
  "غرداية": { "home": 900, "desk": 500 },
  "غليزان": { "home": 700, "desk": 400 },
  "تيميمون": { "home": 1100, "desk": 600 },
  "أولاد جلال": { "home": 900, "desk": 500 },
  "إن صالح": { "home": 1300, "desk": 600 },
  "جانت": { "home": 1100, "desk": 500 }
};

// إضافة الولايات للقائمة
const wilayaSelect = document.getElementById("wilaya");
Object.keys(deliveryPrices).forEach(w=>{
  const opt=document.createElement("option");
  opt.value=w;
  opt.textContent=w;
  wilayaSelect.appendChild(opt);
});

let pieceCount=0;
const UNIT_PRICE=3000;

// دالة تحديد المقاس حسب الطول والوزن
function getSize(height){
  if(height>=6 && height<=7 ) return "S1";
  if(height>=8 && height<=9) return "S2";
  if(height>=10 && height<=11) return "S3";
  if(height>=12 && height<=13 ) return "S4";
 
  return "غير متوفر";
}

function addPiece() {
  pieceCount++;
  const container = document.getElementById("piecesContainer");
  const div = document.createElement("div");
  div.className = "piece";

  const heightOptions = Array.from({length:9}, (_, i) => `<option value="${6+i}">${6+i}  سنوات </option>`).join('');
  const weightOptions = Array.from({length:100}, (_, i) => `<option value="${1+i}">${1+i} كغ</option>`).join('');
  
  div.innerHTML=`
    <label>🧩 أضف الى السلة 🛒:</label>
    <select name="modal${pieceCount}" onchange="showModalImage(this,${pieceCount}); updatePrice();" required>
      <option value="">-- اختر مودال --</option>
      <option value="1">مودال رقم 1</option>
      <option value="2">مودال رقم 2</option>
      <option value="3">مودال رقم 3</option>
      <option value="4">مودال رقم 4</option>
      <option value="5">مودال رقم 5</option>
    </select>
    <div id="modalImage${pieceCount}" style="margin-top:10px; text-align:center;"></div>

    <label>🔢 الكمية:</label>
    <select name="quantity${pieceCount}" onchange="updatePrice()" required>${Array.from({length:10},(_,i)=>`<option value="${i+1}">${i+1}</option>`).join('')}</select>

    <label>🎨 اللون:</label>
    <select name="color${pieceCount}" required>
      <option value="أبيض">أبيض</option>
      <option value="أسود">أسود</option>
      <option value="رمادي">رمادي</option>
      <option value="أزرق">أزرق</option>
      <option value="أحمر">أحمر</option>
      <option value="أخضر">أخضر</option>
    </select>

    <label>📏 عمر الطفل:</label>
    <select name="height${pieceCount}" onchange="updateSize(this,${pieceCount})" required>${heightOptions}</select>

   
    <label>📐 المقاس:</label>
    <input type="text" name="size${pieceCount}" id="size${pieceCount}" readonly>

    <button type="button" onclick="removePiece(this)" style="margin-top:10px; background:#ef4444;">🗑️ إلغاء الطلب</button>
  `;
  container.appendChild(div);
  updatePrice();
}

// دالة إزالة قطعة
function removePiece(button){
  const pieceDiv = button.closest(".piece");
  pieceDiv.remove();
  updatePrice();
}
// تحديث المقاس
function updateSize(select,id){
  const piece=document.querySelector(`.piece:nth-child(${id})`);
  const height=parseInt(piece.querySelector(`select[name^="height"]`).value);
  
  if(height) document.getElementById(`size${id}`).value=getSize(height);
}

// عرض صورة المودال
function showModalImage(select,id){
  const imgDiv=document.getElementById(`modalImage${id}`);
  const value=select.value;
  if(!value){ imgDiv.innerHTML=""; return; }
  const modalImages={
    "1":"images/modal1.jpg","2":"images/modal2.jpg","3":"images/modal3.jpg",
    "4":"images/modal4.jpg","5":"images/modal5.jpg"
  };
  const img=document.createElement("img");
  img.src=modalImages[value];
  img.alt=`مودال ${value}`;
  img.style.maxWidth="220px";
  img.onerror=function(){ this.onerror=null; this.src=this.src.replace('/images/','/image/'); };
  imgDiv.innerHTML="";
  imgDiv.appendChild(img);
}

// حساب السعر
function updatePrice(){
  const pieces=document.querySelectorAll(".piece");
  let productPrice=0;
  pieces.forEach(piece=>{
    const qty=parseInt(piece.querySelector('select[name^="quantity"]').value)||0;
    productPrice+=qty*UNIT_PRICE;
  });
  const wilaya=wilayaSelect.value;
  const deliveryType=document.getElementById("deliveryType").value;
  const deliveryCost=deliveryPrices[wilaya] ? (deliveryPrices[wilaya][deliveryType]||0):0;
  const total=productPrice+deliveryCost;
  document.getElementById("priceDetails").innerHTML=`💰 السعر: ${productPrice} دج + ${deliveryCost} دج توصيل<br>💸 السعر الكلي: ${total} دج`;
  return total;
}
document.getElementById("orderForm").addEventListener("change",updatePrice);

// نافذة النجاح
function showModal(total){
  document.getElementById("totalPrice").textContent=`💸 المجموع الكلي: ${total} دج`;
  document.getElementById("successModal").style.display="flex";
}
function closeModal(){ document.getElementById("successModal").style.display="none"; }

// إرسال البيانات
document.getElementById("orderForm").addEventListener("submit",function(e){
  e.preventDefault();
  const form=document.getElementById("orderForm");
  const formData=new FormData(form);
  formData.set('total',updatePrice());
  document.getElementById("loading").style.display="block";

  fetch(SCRIPT_URL,{method:"POST",body:formData})
    .then(res=>res.text())
    .then(data=>{
      document.getElementById("loading").style.display="none";
      showModal(updatePrice());
      form.reset();
      document.getElementById("piecesContainer").innerHTML="";
      pieceCount=0;
      updatePrice();
    })
    .catch(err=>{
      document.getElementById("loading").style.display="none";
      alert("❌ حدث خطأ أثناء الإرسال، حاول مرة أخرى.");
      console.error(err);
    });
});
</script>

</body>
</html>
